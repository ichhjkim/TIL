# 01 Transaction(트랜잭션) 이란?



## 탄생 배경

`단일 쿼리로 해결할 수 없는 로직을 처리`할 때 필요한 개념이다. 



여러 개의 쿼리가 처리되는 상황에서 문제가 생긴다면, 시스템에 큰 결함을 남기게 된다. 예를들어,

구매 서비스를 구현한다고 할때, 중요하다.



>##### 쿼리 처리 프로세스
>
>1) 고객 보유금액 확인 (if 보유금액 > 선택상품가격)
>
>2) 선택상품구매처리 (선택상품수량-1)
>
>3) 고객 보유금액감소 (보유금액 - 선택상품가격)



위 프로세스 `3) 고객보유금액감소`에서 Exception이 발생한 경우 1), 2) 단계가 롤백되지 않으면 비용손실을 야기할 수 있다. 이런 문제를 해결하기 위해 Transaction 기술이 탄생하게 되었다.



## 기본방법

- 2개 이상의 쿼리를 하나의 Connection으로 묶어 DB에 전송하고, 이 과정에서 에러가 발생할 경우 자동으로 모든 과정을 원래대로 되돌려 놓는다. 
- 트랜잭션은 여러 쿼리를 처리할 때 동일한 Connection객체를 공유한다.

