# 03_다수의 트랜잭션이 경쟁시 발생할 수 있는 문제

다수의 트랜잭션이 동시에 실행되는 상황에선
트랜잭션 처리방식을 좀 더 고민해야한다.
예를 들어, 특정 트랜잭션이 처리중이고 아직 커밋되지 않았는데 다른 트랜잭션이 그 레코드에 접근한 경우 다음과 같은 문제가 발생할 수 있다.

## [1] Dirty Read

### 상황
- 트랜잭션A가 어떤 값을 1->2로 변경하고, 아직 커밋하지 않은 상태
- 트랜잭션B가 같은 값을 읽은 경우 B는 2가 조회된다.

### 문제
만약 트랜잭션A가 롤백되면, B는 잘못된 앖을 읽은 것

즉, 아직 트랜잭션이 완료되지 않은 상황에서 데이터에 접근을 허용할 경우 발생할 수 있는 `데이터 불일치`

## [2] Non-Repeatable Read

### 상황
- 트랜잭션A가 어떤 값 1을 읽었다. 이후, A는 같은 쿼리를 다시 실행할 예정
- 그 사이, 트랜잭션B가 값을 1->2로 바꾸고 커밋한 경우(`UPDATE/DELETE`)
- 트랜잭션 A가 같은 쿼리 두번을 날리는 사이 두 쿼리의 결과가 다르게 된다

### 문제
즉, 한 트랜잭션에서 같은 쿼리를 두 번 실행했을 때 발생할 수 있는 데이터불일치
'Dirty Read'에 비해서는 발생 확률이 낮다.

## [3] Phantom Read

### 상황
- 트랜잭션A가 어떤 조건을 사용해, 특정 범위의 값 [0, 1, 2, 3, 4]를 읽었다.
- 이후, 트랜잭션A는 같은 쿼리를 실행할 예정
- 그 사이, 트랜잭션B가 같은 테이블에 값 [5, 6, 7]을 추가(`INSERT`)
- A가 같은 쿼리를 두 번 날리는 사이 두 쿼리의 결과가 다르게 되어버린다.

### 문제
즉, 한 트랜잭션에서 일정 범위의 레코드를 두번 이상 읽을 떄 발생하는 데이터 불일치이다.